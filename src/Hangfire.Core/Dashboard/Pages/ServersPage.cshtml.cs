#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.42000
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace Hangfire.Dashboard.Pages
{
    
    #line 2 "..\..\Dashboard\Pages\ServersPage.cshtml"
    using System;
    
    #line default
    #line hidden
    using System.Collections.Generic;
    
    #line 3 "..\..\Dashboard\Pages\ServersPage.cshtml"
    using System.Linq;
    
    #line default
    #line hidden
    using System.Text;
    
    #line 4 "..\..\Dashboard\Pages\ServersPage.cshtml"
    using Hangfire.Common;
    
    #line default
    #line hidden
    
    #line 5 "..\..\Dashboard\Pages\ServersPage.cshtml"
    using Hangfire.Dashboard;
    
    #line default
    #line hidden
    
    #line 6 "..\..\Dashboard\Pages\ServersPage.cshtml"
    using Hangfire.Dashboard.Pages;
    
    #line default
    #line hidden
    
    #line 7 "..\..\Dashboard\Pages\ServersPage.cshtml"
    using Hangfire.Dashboard.Resources;
    
    #line default
    #line hidden
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    internal partial class ServersPage : RazorPage
    {
#line hidden

        public override void Execute()
        {


WriteLiteral("\r\n");









            
            #line 9 "..\..\Dashboard\Pages\ServersPage.cshtml"
  
    Layout = new LayoutPage(Strings.ServersPage_Title);
    
    var monitor = Storage.GetMonitoringApi();
    var servers = monitor.Servers();
    var now = DateTime.UtcNow;
    var inconclusiveThreshold = TimeSpan.FromMinutes(1);
    var possiblyAbortedThreshold = TimeSpan.FromMinutes(5);


            
            #line default
            #line hidden
WriteLiteral("\r\n<div class=\"row\">\r\n    <div class=\"col-md-12\">\r\n        <h1 class=\"page-header\"" +
">");


            
            #line 21 "..\..\Dashboard\Pages\ServersPage.cshtml"
                           Write(Strings.ServersPage_Title);

            
            #line default
            #line hidden
WriteLiteral("</h1>\r\n\r\n");


            
            #line 23 "..\..\Dashboard\Pages\ServersPage.cshtml"
         if (servers.Count == 0)
        {

            
            #line default
            #line hidden
WriteLiteral("            <div class=\"alert alert-warning\">\r\n                ");


            
            #line 26 "..\..\Dashboard\Pages\ServersPage.cshtml"
           Write(Strings.ServersPage_NoServers);

            
            #line default
            #line hidden
WriteLiteral("\r\n            </div>\r\n");


            
            #line 28 "..\..\Dashboard\Pages\ServersPage.cshtml"
        }
        else
        {
            if (servers.Any(x => x.Heartbeat.HasValue && x.Heartbeat.Value < now.Add(-inconclusiveThreshold)))
            {

            
            #line default
            #line hidden
WriteLiteral(@"                <div class=""alert alert-info"">
                    <h4>Aborted servers will be removed automatically</h4>
                    Some of the servers don't have heartbeat reported within the last minute and may be aborted. If they don't report heartbeat in the near future, they will be removed automatically after timeout is exceeded, no manual action is required.
                    Incomplete background jobs running on those servers will be re-queued automatically, but you can speed up the process by checking the <a href=""");


            
            #line 36 "..\..\Dashboard\Pages\ServersPage.cshtml"
                                                                                                                                                              Write(Url.To("/jobs/processing"));

            
            #line default
            #line hidden
WriteLiteral("\">Processing Jobs</a> page.\r\n                </div>\r\n");


            
            #line 38 "..\..\Dashboard\Pages\ServersPage.cshtml"
            }


            
            #line default
            #line hidden
WriteLiteral("            <div class=\"table-responsive\">\r\n                <table class=\"table\">" +
"\r\n                    <thead>\r\n                        <tr>\r\n                   " +
"         <th>");


            
            #line 44 "..\..\Dashboard\Pages\ServersPage.cshtml"
                           Write(Strings.ServersPage_Table_Name);

            
            #line default
            #line hidden
WriteLiteral("</th>\r\n                            <th>");


            
            #line 45 "..\..\Dashboard\Pages\ServersPage.cshtml"
                           Write(Strings.ServersPage_Table_Workers);

            
            #line default
            #line hidden
WriteLiteral("</th>\r\n                            <th>");


            
            #line 46 "..\..\Dashboard\Pages\ServersPage.cshtml"
                           Write(Strings.ServersPage_Table_Queues);

            
            #line default
            #line hidden
WriteLiteral("</th>\r\n                            <th>");


            
            #line 47 "..\..\Dashboard\Pages\ServersPage.cshtml"
                           Write(Strings.ServersPage_Table_Started);

            
            #line default
            #line hidden
WriteLiteral("</th>\r\n                            <th>");


            
            #line 48 "..\..\Dashboard\Pages\ServersPage.cshtml"
                           Write(Strings.ServersPage_Table_Heartbeat);

            
            #line default
            #line hidden
WriteLiteral("</th>\r\n                        </tr>\r\n                    </thead>\r\n             " +
"       <tbody>\r\n");


            
            #line 52 "..\..\Dashboard\Pages\ServersPage.cshtml"
                         foreach (var server in servers)
                        {

            
            #line default
            #line hidden
WriteLiteral("                            <tr>\r\n                                <td>\r\n");


            
            #line 56 "..\..\Dashboard\Pages\ServersPage.cshtml"
                                     if (server.Heartbeat < now.Add(-possiblyAbortedThreshold))
                                    {

            
            #line default
            #line hidden
WriteLiteral("                                        <span class=\"glyphicon glyphicon-alert te" +
"xt-danger\" title=\"Possibly aborted\"></span>\r\n");


            
            #line 59 "..\..\Dashboard\Pages\ServersPage.cshtml"
                                    }
                                    else if (server.Heartbeat < now.Add(-inconclusiveThreshold))
                                    {

            
            #line default
            #line hidden
WriteLiteral("                                        <span class=\"glyphicon\" style=\"margin-rig" +
"ht: 14px;\"></span>\r\n");


            
            #line 63 "..\..\Dashboard\Pages\ServersPage.cshtml"
                                    }
                                    else
                                    {

            
            #line default
            #line hidden
WriteLiteral("                                        <span class=\"glyphicon glyphicon-ok text-" +
"success\" title=\"Active\"></span>\r\n");


            
            #line 67 "..\..\Dashboard\Pages\ServersPage.cshtml"
                                    }

            
            #line default
            #line hidden
WriteLiteral("                                    ");


            
            #line 68 "..\..\Dashboard\Pages\ServersPage.cshtml"
                               Write(Html.ServerId(server.Name));

            
            #line default
            #line hidden
WriteLiteral("\r\n                                </td>\r\n                                <td>");


            
            #line 70 "..\..\Dashboard\Pages\ServersPage.cshtml"
                               Write(server.WorkersCount);

            
            #line default
            #line hidden
WriteLiteral("</td>\r\n                                <td>");


            
            #line 71 "..\..\Dashboard\Pages\ServersPage.cshtml"
                               Write(Html.Raw(String.Join(", ", server.Queues.Select(Html.QueueLabel))));

            
            #line default
            #line hidden
WriteLiteral("</td>\r\n                                <td>");


            
            #line 72 "..\..\Dashboard\Pages\ServersPage.cshtml"
                               Write(Html.RelativeTime(server.StartedAt));

            
            #line default
            #line hidden
WriteLiteral("</td>\r\n                                <td>\r\n");


            
            #line 74 "..\..\Dashboard\Pages\ServersPage.cshtml"
                                     if (server.Heartbeat.HasValue)
                                    {
                                        
            
            #line default
            #line hidden
            
            #line 76 "..\..\Dashboard\Pages\ServersPage.cshtml"
                                   Write(Html.RelativeTime(server.Heartbeat.Value));

            
            #line default
            #line hidden
            
            #line 76 "..\..\Dashboard\Pages\ServersPage.cshtml"
                                                                                  
                                    }

            
            #line default
            #line hidden
WriteLiteral("                                </td>\r\n                            </tr>\r\n");


            
            #line 80 "..\..\Dashboard\Pages\ServersPage.cshtml"
                        }

            
            #line default
            #line hidden
WriteLiteral("                    </tbody>\r\n                </table>\r\n            </div>\r\n");


            
            #line 84 "..\..\Dashboard\Pages\ServersPage.cshtml"
        }

            
            #line default
            #line hidden
WriteLiteral("    </div>\r\n</div>");


        }
    }
}
#pragma warning restore 1591
